var D2D_Animation=(function(){function a(g,h,d,i,c,b,f,e){this.texture=g;this.srcX=c;this.srcY=b;this.srcWidth=f;this.srcHeight=e;this.horFrames=h;this.verFrames=d;this.startX=c;this.startY=b;this.fps=i;this.frameTime=0;this.originX=0;this.originY=0;this.alpha=1;}a.prototype.update=function(b){this.frameTime+=b;if(this.frameTime>=1/this.fps){this.frameTime=0;this.srcX+=this.srcWidth;if(this.srcX>(this.horFrames-1)*this.srcWidth+this.startX){this.srcX=this.startX;this.srcY+=this.srcHeight;if(this.srcY>(this.verFrames-1)*this.srcHeight+this.startY){this.srcY=this.startY;}}}};a.prototype.draw=function(c){var b=c.getContext();b.save();b.globalAlpha=this.alpha;if(arguments.length==1){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==3){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==5){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){b.translate(arguments[1],arguments[2]);b.rotate(arguments[3]);b.scale(arguments[4],arguments[5]);b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}}}}b.restore();};a.prototype.dispose=function(){this.texture=null;this.srcX=null;this.srcY=null;this.srcWidth=null;this.srcHeight=null;this.horFrames=null;this.verFrames=null;this.startX=null;this.startY=null;this.fps=null;this.frameTime=null;this.originX=null;this.originY=null;};a.prototype.setAlpha=function(b){this.alpha=b;};a.prototype.getAlpha=function(){return this.alpha;};a.prototype.setOrigin=function(c,b){this.originX=c;this.originY=b;};a.prototype.getOriginX=function(){return this.originX;};a.prototype.getOriginY=function(){return this.originY;};a.prototype.getStartX=function(){return this.startX;};a.prototype.getStartY=function(){return this.startY;};a.prototype.getWidth=function(){return this.srcWidth;};a.prototype.getHeight=function(){return this.srcHeight;};a.prototype.getTexture=function(){return this.texture;};a.prototype.setTexture=function(b){this.texture=b;};a.prototype.reset=function(){this.srcX=this.startX;this.srcY=this.startY;this.frameTime=0;};a.prototype.getFps=function(){return this.fps;};a.prototype.setFps=function(b){this.fps=b;};a.prototype.setCurrentFrame=function(c,b){this.srcX=(c-1)*this.srcWidth+this.startX;this.srcY=(b-1)*this.srcHeight+this.startY;this.frameTime=0;};a.prototype.getCurrentFrameX=function(){return((this.srcX-this.startX)/this.srcWidth)+1;};a.prototype.getCurrentFrameY=function(){return((this.srcY-this.startY)/this.srcHeight)+1;};a.prototype.getHorFrames=function(){return this.horFrames;};a.prototype.getVerFrames=function(){return this.verFrames;};return a;})();var D2D_Audio=(function(){function a(b){this.audio=new Audio(b);this.audio.loop=false;}a.prototype.play=function(){this.audio.play();};a.prototype.pause=function(){this.audio.pause();};a.prototype.stop=function(){this.audio.pause();if(this.audio.readyState==4){this.audio.currentTime=0;}};a.prototype.reload=function(b){this.audio.src=b;this.audio.load();};a.prototype.setVolume=function(b){this.audio.volume=b;};a.prototype.getVolume=function(){return this.audio.volume;};a.prototype.isLoop=function(){return this.audio.loop;};a.prototype.setLoop=function(b){this.audio.loop=b;};a.prototype.getTotalTime=function(){return this.audio.duration;};a.prototype.getCurrentTime=function(){return this.audio.currentTime;};a.prototype.setCurrentTime=function(b){this.audio.currentTime=b;};a.prototype.getSpeed=function(){return this.audio.playbackRate;};a.prototype.setSpeed=function(b){this.audio.playbackRate=b;};a.prototype.isPlaying=function(){return(this.audio.paused==false);};a.prototype.isReady=function(){return(this.audio.readyState==4);};a.prototype.getReadyStateCode=function(){return this.audio.readyState;};a.prototype.getReadyState=function(){if(this.audio.readyState==0){return"HAVE_NOTHING";}else{if(this.audio.readyState==1){return"HAVE_METADATA";}else{if(this.audio.readyState==2){return"HAVE_CURRENT_DATA";}else{if(this.audio.readyState==3){return"HAVE_FUTURE_DATA";}else{if(this.audio.readyState==4){return"HAVE_ENOUGH_DATA";}else{return"READY_STATE_ERROR";}}}}}};a.prototype.dispose=function(){this.audio.pause();this.audio=null;};return a;})();var D2D_Engine=(function(){function a(c,e,b,q){this.canvas=document.getElementById(c);this.canvas.width=b;this.canvas.height=q;this.context2D=this.canvas.getContext("2d");this.canvasBuffer=document.createElement("canvas");this.canvasBuffer.width=b;this.canvasBuffer.height=q;this.contextBuffer2D=this.canvasBuffer.getContext("2d");this.fps=e;this.currentFps=0;this.frameCounter=0;this.timeCounter=0;this.canvas.mouseStates={leftButton:{down:false,up:false,click:false,dblclick:false},rightButton:{down:false,up:false,click:false,dblclick:false},middleButton:{down:false,up:false,click:false,dblclick:false},pos:{x:0,y:0},wheel:false,move:false,out:false,over:false,wheelDelta:0};function i(r){r=r||window.event;if(!-[1,]){switch(r.button){case 1:this.mouseStates.leftButton.down=true;break;case 2:this.mouseStates.rightButton.down=true;break;case 4:this.mouseStates.middleButton.down=true;break;}}else{switch(r.which){case 1:this.mouseStates.leftButton.down=true;break;case 2:this.mouseStates.middleButton.down=true;break;case 3:this.mouseStates.rightButton.down=true;break;}}r.preventDefault();}function k(r){r=r||window.event;if(!-[1,]){switch(r.button){case 1:this.mouseStates.leftButton.up=true;this.mouseStates.leftButton.down=false;break;case 2:this.mouseStates.rightButton.up=true;this.mouseStates.rightButton.down=false;break;case 4:this.mouseStates.middleButton.up=true;this.mouseStates.middleButton.down=false;break;}}else{switch(r.which){case 1:this.mouseStates.leftButton.up=true;this.mouseStates.leftButton.down=false;break;case 2:this.mouseStates.middleButton.up=true;this.mouseStates.middleButton.down=false;break;case 3:this.mouseStates.rightButton.up=true;this.mouseStates.rightButton.down=false;break;}}r.preventDefault();}function p(r){r=r||window.event;if(!-[1,]){switch(r.button){case 1:this.mouseStates.leftButton.click=true;break;case 2:this.mouseStates.rightButton.click=true;break;case 4:this.mouseStates.middleButton.click=true;break;}}else{switch(r.which){case 1:this.mouseStates.leftButton.click=true;break;case 2:this.mouseStates.middleButton.click=true;break;case 3:this.mouseStates.rightButton.click=true;break;}}r.preventDefault();}function o(r){r=r||window.event;if(!-[1,]){switch(r.button){case 1:this.mouseStates.leftButton.dblclick=true;break;case 2:this.mouseStates.rightButton.dblclick=true;break;case 4:this.mouseStates.middleButton.dblclick=true;break;}}else{switch(r.which){case 1:this.mouseStates.leftButton.dblclick=true;break;case 2:this.mouseStates.middleButton.dblclick=true;break;case 3:this.mouseStates.rightButton.dblclick=true;break;}}r.preventDefault();}function l(r){r=r||window.event;this.mouseStates.wheel=true;if(r.wheelDelta){this.mouseStates.wheelDelta=r.wheelDelta/120;}else{if(r.detail){this.mouseStates.wheelDelta=-r.detail/3;}}r.preventDefault();}function n(s){s=s||window.event;this.mouseStates.move=true;if(navigator.userAgent.indexOf("Firefox")>0){var r=this.getBoundingClientRect();this.mouseStates.pos.x=s.clientX-r.left;this.mouseStates.pos.y=s.clientY-r.top;}else{this.mouseStates.pos.x=s.offsetX;this.mouseStates.pos.y=s.offsetY;}s.preventDefault();}function j(r){r=r||window.event;this.mouseStates.out=true;this.mouseStates.leftButton.down=false;this.mouseStates.rightButton.down=false;this.mouseStates.middleButton.down=false;r.preventDefault();}function d(r){r=r||window.event;this.mouseStates.over=true;r.preventDefault();}function g(r){r=r||window.event;r.returnValue=false;r.preventDefault();}this.canvas.onmousedown=i;this.canvas.onmouseup=k;this.canvas.onclick=p;this.canvas.ondblclick=o;this.canvas.onmousewheel=l;this.canvas.onmousemove=n;this.canvas.onmouseout=j;this.canvas.onmouseover=d;this.canvas.oncontextmenu=g;this.canvas.addEventListener("DOMMouseScroll",l,false);this.canvas.touchStates={};function h(r){r=r||window.event;r.preventDefault();}function f(r){r=r||window.event;r.preventDefault();}function m(r){r=r||window.event;r.preventDefault();}this.canvas.addEventListener("touchstart",h,false);this.canvas.addEventListener("touchmove",f,false);this.canvas.addEventListener("touchend",m,false);}a.prototype.getContext=function(){return this.contextBuffer2D;};a.prototype.getCanvas=function(){return this.canvas;};a.prototype.beginDraw=function(){};a.prototype.endDraw=function(){this.context2D.drawImage(this.canvasBuffer,0,0);};a.prototype.clear=function(b){if(b==undefined||b==null){this.contextBuffer2D.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height);}else{this.contextBuffer2D.fillStyle=b;this.contextBuffer2D.fillRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height);}};a.prototype.getFps=function(){return this.fps;};a.prototype.setFps=function(b){this.fps=b;};a.prototype.getCurrentFps=function(){return this.currentFps;};a.prototype.getWidth=function(){return this.canvas.width;};a.prototype.getCanvasWidth=a.prototype.getWidth;a.prototype.getHeight=function(){return this.canvas.height;};a.prototype.getCanvasHeight=a.prototype.getHeight;a.prototype.setWidth=function(b){this.canvas.width=b;this.canvasBuffer.width=b;};a.prototype.setCanvasWidth=a.prototype.setWidth;a.prototype.setHeight=function(b){this.canvas.height=b;this.canvasBuffer.height=b;};a.prototype.setCanvasHeight=a.prototype.setHeight;a.prototype.getMousePosX=function(){return this.canvas.mouseStates.pos.x;};a.prototype.getMousePosY=function(){return this.canvas.mouseStates.pos.y;};a.prototype.getMousePos=function(){return this.canvas.mouseStates.pos;};a.prototype.isMouseDown=function(b){if(b==undefined||b=="left"){return this.canvas.mouseStates.leftButton.down;}else{if(b=="right"){return this.canvas.mouseStates.rightButton.down;}else{if(b=="middle"){return this.canvas.mouseStates.middleButton.down;}else{return undefined;}}}};a.prototype.isMouseUp=function(b){if(b==undefined||b=="left"){return this.canvas.mouseStates.leftButton.up;}else{if(b=="right"){return this.canvas.mouseStates.rightButton.up;}else{if(b=="middle"){return this.canvas.mouseStates.middleButton.up;}else{return undefined;}}}};a.prototype.isMouseClick=function(b){if(b==undefined||b=="left"){return this.canvas.mouseStates.leftButton.click;}else{if(b=="right"){return this.canvas.mouseStates.rightButton.click;}else{if(b=="middle"){return this.canvas.mouseStates.middleButton.click;}else{return undefined;}}}};a.prototype.isMouseDblclick=function(b){if(b==undefined||b=="left"){return this.canvas.mouseStates.leftButton.dblclick;}else{if(b=="right"){return this.canvas.mouseStates.rightButton.dblclick;}else{if(b=="middle"){return this.canvas.mouseStates.middleButton.dblclick;}else{return undefined;}}}};a.prototype.isMouseMove=function(){return this.canvas.mouseStates.move;};a.prototype.isMouseWheel=function(){return this.canvas.mouseStates.wheel;};a.prototype.isMouseOut=function(){return this.canvas.mouseStates.out;};a.prototype.isMouseOver=function(){return this.canvas.mouseStates.over;};a.prototype.getMouseWheelDelta=function(){return this.canvas.mouseStates.wheelDelta;};a.prototype.getMouseWheel=a.prototype.getMouseWheelDelta;a.prototype.setCursorStyle=function(b){if(b==undefined){this.canvas.style.cursor="default";}else{this.canvas.style.cursor=b;}};a.prototype.setMouseStyle=a.prototype.setCursorStyle;a.prototype.getCursorStyle=function(){return this.canvas.style.cursor;};a.prototype.getMouseStyle=a.prototype.getCursorStyle;a.prototype.drawLine=function(e,g,d,f,c,b){this.contextBuffer2D.save();this.contextBuffer2D.beginPath();this.contextBuffer2D.moveTo(e,g);this.contextBuffer2D.lineTo(d,f);if(b!=undefined){this.contextBuffer2D.lineWidth=b;}else{this.contextBuffer2D.lineWidth=1;}this.contextBuffer2D.strokeStyle=c;this.contextBuffer2D.stroke();this.contextBuffer2D.restore();};a.prototype.drawFillRect=function(c,f,e,b,d){this.contextBuffer2D.save();this.contextBuffer2D.fillStyle=d;this.contextBuffer2D.fillRect(c,f,e,b);this.contextBuffer2D.restore();};a.prototype.drawStrokeRect=function(d,g,f,c,e,b){this.contextBuffer2D.save();if(b!=undefined){this.contextBuffer2D.lineWidth=b;}else{this.contextBuffer2D.lineWidth=1;}this.contextBuffer2D.strokeStyle=e;this.contextBuffer2D.strokeRect(d,g,f,c);this.contextBuffer2D.restore();};return a;})();function startEngine(a){a.lastTime=new Date().getTime();var b=function(){var d=new Date().getTime();var c=d-a.lastTime;if(c-1000/a.fps>=0){a.lastTime=d;a.frameCounter++;a.timeCounter+=c;if(a.timeCounter>=1000){a.timeCounter-=1000;a.currentFps=a.frameCounter;a.frameCounter=0;}if(a.update!=undefined){a.update(c/1000);}if(a.draw!=undefined){a.draw(c/1000);}a.canvas.mouseStates.leftButton.up=false;a.canvas.mouseStates.leftButton.click=false;a.canvas.mouseStates.leftButton.dblclick=false;a.canvas.mouseStates.rightButton.up=false;a.canvas.mouseStates.rightButton.click=false;a.canvas.mouseStates.rightButton.dblclick=false;a.canvas.mouseStates.middleButton.up=false;a.canvas.mouseStates.middleButton.click=false;a.canvas.mouseStates.middleButton.dblclick=false;a.canvas.mouseStates.wheel=false;a.canvas.mouseStates.move=false;a.canvas.mouseStates.out=false;a.canvas.mouseStates.over=false;a.canvas.mouseStates.wheelDelta=0;}};window.setInterval(b,1);}var D2D_Font=(function(){function a(c,b,d,e){if(e==true){this.font_style="italic";}else{this.font_style="normal";}this.font_variant="normal";if(d==true){this.font_weight="bold";}else{this.font_weight="normal";}this.font_size=b;this.font_family=c;this.color="#FFFFFF";this.lineWidth=1;this.horAlign="start";this.verAlign="top";this.originX=0;this.originY=0;this.alpha=1;}a.prototype.draw=function(f,h,b,i,g,d,c){var e=f.getContext();e.save();e.globalAlpha=this.alpha;e.fillStyle=this.color;e.font=""+this.font_style+" "+this.font_variant+" "+this.font_weight+" "+this.font_size+" "+this.font_family;e.textAlign=this.horAlign;e.textBaseline=this.verAlign;if(arguments.length==2){e.fillText(h,0-this.originX,0-this.originY);}else{if(arguments.length==4){e.fillText(h,b-this.originX,i-this.originY);}else{if(arguments.length==7){e.translate(b,i);e.rotate(g);e.scale(d,c);e.fillText(h,0-this.originX,0-this.originY);}}}e.restore();};a.prototype.drawFillText=a.prototype.draw;a.prototype.drawStrokeText=function(f,h,b,i,g,d,c){var e=f.getContext();e.save();e.globalAlpha=this.alpha;e.strokeStyle=this.color;e.lineWidth=this.lineWidth;e.font=""+this.font_style+" "+this.font_variant+" "+this.font_weight+" "+this.font_size+" "+this.font_family;e.textAlign=this.horAlign;e.textBaseline=this.verAlign;if(arguments.length==2){e.strokeText(h,0-this.originX,0-this.originY);}else{if(arguments.length==4){e.strokeText(h,b-this.originX,i-this.originY);}else{if(arguments.length==7){e.translate(b,i);e.rotate(g);e.scale(d,c);e.strokeText(h,0-this.originX,0-this.originY);}}}e.restore();};a.prototype.dispose=function(){this.font_style=null;this.font_variant=null;this.font_weight=null;this.font_size=null;this.font_family=null;this.color=null;this.lineWidth=null;this.horAlign=null;this.verAlign=null;this.originX=null;this.originY=null;this.alpha=null;};a.prototype.setAlpha=function(b){this.alpha=b;};a.prototype.getAlpha=function(){return this.alpha;};a.prototype.getFontFamily=function(){return this.font_family;};a.prototype.setFontFamily=function(b){this.font_family=b;};a.prototype.getFontSize=function(){return this.font_size;};a.prototype.setFontSize=function(b){this.font_size=b;};a.prototype.isBold=function(){if(this.font_weight=="normal"){return false;}else{return true;}};a.prototype.setBold=function(b){if(b==true){this.font_weight="bold";}else{this.font_weight="normal";}};a.prototype.isItalic=function(){if(this.font_style=="normal"){return false;}else{return true;}};a.prototype.setItalic=function(b){if(b==true){this.font_style="italic";}else{this.font_style="normal";}};a.prototype.getColor=function(){return this.color;};a.prototype.setColor=function(b){this.color=b;};a.prototype.getLineWidth=function(){return this.lineWidth;};a.prototype.setLineWidth=function(b){this.lineWidth=b;};a.prototype.setOrigin=function(c,b){this.originX=c;this.originY=b;};a.prototype.getOriginX=function(){return this.originX;};a.prototype.getOriginY=function(){return this.originY;};a.prototype.getHorAlign=function(){return this.horAlign;};a.prototype.setHorAlign=function(b){this.horAlign=b;};a.prototype.getVerAlign=function(){return this.verAlign;};a.prototype.setVerAlign=function(b){this.verAlign=b;};return a;})();var D2D_Loader=(function(){function a(){this.resFinished=[];this.resWaiting=[];}a.prototype.load=function(b,c){var d=new b(c);this.resWaiting.push(d);return d;};a.prototype.add=function(d,b,c){if(d==undefined||d==null||d.isReady==undefined){d=new b(c);}this.resWaiting.push(d);};a.prototype.update=function(){if(this.resWaiting.length>0){for(var b=0;b<this.resWaiting.length;b++){if(this.resWaiting[b].isReady()){this.resFinished.push(this.resWaiting[b]);this.resWaiting.splice(b,1);break;}}}};a.prototype.updateProgress=a.prototype.update;a.prototype.getProgress=function(c){var b=Math.floor((this.resFinished.length/(this.resFinished.length+this.resWaiting.length))*100);if(c==true){return b;}else{return b/100;}};a.prototype.clear=function(){this.resFinished.splice(0,this.resFinished.length);this.resWaiting.splice(0,this.resWaiting.length);};a.prototype.dispose=function(){this.resFinished.splice(0,this.resFinished.length);this.resWaiting.splice(0,this.resWaiting.length);this.resFinished=null;this.resWaiting=null;};return a;})();var D2D_RectBox=(function(){function a(c,e,d,b){this.x=c;this.y=e;this.width=d;this.height=b;this.originX=0;this.originY=0;}a.prototype.draw=function(e,c,b){var d=e.getContext();d.save();if(c!=undefined){d.strokeStyle=c;}else{d.strokeStyle="#0000FF";}if(b!=undefined){d.lineWidth=b;}else{d.lineWidth=1;}d.strokeRect(this.x-this.originX,this.y-this.originY,this.width,this.height);d.restore();};a.prototype.dispose=function(){this.x=null;this.y=null;this.width=null;this.height=null;this.originX=null;this.originY=null;};a.prototype.setOrigin=function(c,b){this.originX=c;this.originY=b;};a.prototype.getOriginX=function(){return this.originX;};a.prototype.getOriginY=function(){return this.originY;};a.prototype.getPosX=function(){return this.x;};a.prototype.getPosY=function(){return this.y;};a.prototype.getWidth=function(){return this.width;};a.prototype.getHeight=function(){return this.height;};a.prototype.setPosition=function(b,c){this.x=b;this.y=c;};a.prototype.setSize=function(c,b){this.width=c;this.height=b;};a.prototype.testPoint=function(b,c){return(b>=this.x-this.originX&&b<=this.x-this.originX+this.width&&c>=this.y-this.originY&&c<=this.y-this.originY+this.height);};a.prototype.testRect=function(b){return(Math.abs((this.x-this.originX+this.width/2)-(b.x-b.originX+b.width/2))<=this.width/2+b.width/2&&Math.abs((this.y-this.originY+this.height/2)-(b.y-b.originY+b.height/2))<=this.height/2+b.height/2);};return a;})();var D2D_Sprite=(function(){function a(f,c,b,e,d){this.texture=f;this.srcX=c;this.srcY=b;this.srcWidth=e;this.srcHeight=d;this.originX=0;this.originY=0;this.alpha=1;}a.prototype.draw=function(c){var b=c.getContext();b.save();b.globalAlpha=this.alpha;if(arguments.length==1){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==3){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==5){b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){b.translate(arguments[1],arguments[2]);b.rotate(arguments[3]);b.scale(arguments[4],arguments[5]);b.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}}}}b.restore();};a.prototype.dispose=function(){this.texture=null;this.srcX=null;this.srcY=null;this.srcWidth=null;this.srcHeight=null;this.originX=null;this.originY=null;this.alpha=null;};a.prototype.setAlpha=function(b){this.alpha=b;};a.prototype.getAlpha=function(){return this.alpha;};a.prototype.setOrigin=function(c,b){this.originX=c;this.originY=b;};a.prototype.getOriginX=function(){return this.originX;};a.prototype.getOriginY=function(){return this.originY;};a.prototype.getSrcX=function(){return this.srcX;};a.prototype.getSrcY=function(){return this.srcY;};a.prototype.getWidth=function(){return this.srcWidth;};a.prototype.getHeight=function(){return this.srcHeight;};a.prototype.setSrcRect=function(c,b,e,d){this.srcX=c;this.srcY=b;this.srcWidth=e;this.srcHeight=d;};a.prototype.getTexture=function(){return this.texture;};a.prototype.setTexture=function(b){this.texture=b;};return a;})();var D2D_Texture=(function(){function a(b){this.image=new Image();this.image.src=b;}a.prototype.getWidth=function(){return this.image.width;};a.prototype.getHeight=function(){return this.image.height;};a.prototype.isReady=function(){return this.image.complete;};a.prototype.getDrawHandle=function(){return this.image;};a.prototype.dispose=function(){this.image=null;};return a;})();var D2D_Video=(function(){function a(b){this.video=document.createElement("video");this.video.src=b;this.video.loop=false;this.originX=0;this.originY=0;this.alpha=1;}a.prototype.draw=function(c){var b=c.getContext();b.save();b.globalAlpha=this.alpha;if(arguments.length==1){b.drawImage(this.video,0-this.originX,0-this.originY);}else{if(arguments.length==3){b.drawImage(this.video,arguments[1]-this.originX,arguments[2]-this.originY);}else{if(arguments.length==5){b.drawImage(this.video,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){b.translate(arguments[1],arguments[2]);b.rotate(arguments[3]);b.scale(arguments[4],arguments[5]);b.drawImage(this.video,0-this.originX,0-this.originY,32,32);}}}}b.restore();};a.prototype.setAlpha=function(b){this.alpha=b;};a.prototype.getAlpha=function(){return this.alpha;};a.prototype.setOrigin=function(c,b){this.originX=c;this.originY=b;};a.prototype.getOriginX=function(){return this.originX;};a.prototype.getOriginY=function(){return this.originY;};a.prototype.getDrawHandle=function(){return this.video;};a.prototype.play=function(){this.video.play();};a.prototype.pause=function(){this.video.pause();};a.prototype.stop=function(){this.video.pause();if(this.video.readyState==4){this.video.currentTime=0;}};a.prototype.reload=function(b){this.video.src=b;this.video.load();};a.prototype.setVolume=function(b){this.video.volume=b;};a.prototype.getVolume=function(){return this.video.volume;};a.prototype.isLoop=function(){return this.video.loop;};a.prototype.setLoop=function(b){this.video.loop=b;};a.prototype.getTotalTime=function(){return this.video.duration;};a.prototype.getCurrentTime=function(){return this.video.currentTime;};a.prototype.setCurrentTime=function(b){this.video.currentTime=b;};a.prototype.getSpeed=function(){return this.video.playbackRate;};a.prototype.setSpeed=function(b){this.video.playbackRate=b;};a.prototype.isPlaying=function(){return(this.video.paused==false);};a.prototype.isReady=function(){return(this.video.readyState==4);};a.prototype.getReadyStateCode=function(){return this.video.readyState;};a.prototype.getReadyState=function(){if(this.video.readyState==0){return"HAVE_NOTHING";}else{if(this.video.readyState==1){return"HAVE_METADATA";}else{if(this.video.readyState==2){return"HAVE_CURRENT_DATA";}else{if(this.video.readyState==3){return"HAVE_FUTURE_DATA";}else{if(this.video.readyState==4){return"HAVE_ENOUGH_DATA";}else{return"READY_STATE_ERROR";}}}}}};a.prototype.dispose=function(){this.video.pause();this.video=null;this.originX=null;this.originY=null;this.alpha=null;};return a;})();